<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Check Box</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.7.2/css/all.min.css">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <link rel="stylesheet" href="../styles/checkoutpage.css">
</head>

<body>
    <header>
        <div class="title">
            <h4><i class="fa-solid fa-bag-shopping"></i><b>shop</b><span>cart</span></h4>
        </div>
        <div class="location">
            <button>
                <span><i class="fa-solid fa-location-dot"></i></span>
                <span>Delhi, 110110</span>
            </button>
        </div>
    </header>
    <div class="right-side">
        <div class="user">
            <i class="fa-solid fa-circle-user"></i>
            <button id="user-profile-btn" class="btn btn-link" onclick="goToLoginPage()">Login</button>
            <div id="user-profile"></div>
            <button id="logout-button" style="display: none;" onclick="logout()">Logout</button>

        </div>

    </div>
    <div class="search-bar">
        <input type="text" placeholder="search">
        <i class="fa-solid fa-magnifying-glass"></i>
    </div>
    <nav>
        <ul>
            <li>Fresh</li>
            <li>Today's Deals</li>
            <li>Mobiles</li>
            <li>Gift Cards</li>
            <li>Clothing</li>
            <li>Health</li>
            <li>Pet Corner</li>
            <li>Books</li>
            <li>Beauty</li>
            <li>Kitchen</li>
            <li>Bedroom</li>
            <li>sport</li>
            <li>Bags</li>
        </ul>
    </nav>

    <div class="container">
        <div class="first-left" id='firstleft'>
           
        </div>
        <div class="leftside">
            <div id="expanded-card" class="expanded-card hidden">

                <div class="expanded-content">

                    <div class="expanded-details">
                        <button class="home-btn1" onclick="goToHomePage()">Home ></button></a>
                        <a href=""><button class="home-btn2"> <b>Your Cart</b> </button></a>
                        <h3 id="expanded-title"></h3>
                        <p id="expanded-description"></p>
                        <h4 id="expanded-price"></h4>
                        <div class="rating" id="ratings">
                            
                        </div>

                        <div class="color-options">
                            <label class="lable">Color: <span>Black</span> </label>
                            <div class="colors-div">
                                <p class="color1"></p>
                                <p class="color2"></p>
                                <p class="color3"></p>
                                <p class="color4"></p>
                            </div>
                            Qunatity<input type="number" placeholder="1" id ='quantity' min = "1" value="" onchange="quantityChange()">

                        </div>
                        <div class="share-btn">
                            <ul>
                                <li><i class="fa-solid fa-arrow-up"></i><i
                                        class="fa-solid fa-arrow-down-long"></i>Compare</li>
                                <li><i class="fa-solid fa-message"></i>Ask a question</li>
                                <li><i class="fa-solid fa-share-nodes"></i>Share</li>
                            </ul>
                        </div>

                        </div>

                    </div>
                </div>

            </div>

            <div class="main-top">
                <div class="topside" id="topside">
                    <img id ='tsimg' src="../assets/product2.jpg" alt="" width="75px" height="60px">
                    <ul>
                        <li>Tray Table</li>
                        <li>Color:Black</li>
                        <li><button>X Remove</button></li>
                    </ul>


                    <input type="number" placeholder="1" id = 'addquantity' disabled='true' width="30px">
                    <p class="price-amount" id="price"><i class="fa-solid fa-indian-rupee-sign"></i>999.00</p>
                    <p class="price-amount1" id ='tprice'><i class="fa-solid fa-indian-rupee-sign"></i>1998.00</p>
                </div>
            </div>
            <div class="rightside">
                <ul>
                    <li>Product</li>
                    <li>Quantity</li>
                    <li>Price</li>
                    <li>Subtotal</li>
                </ul>
            </div>


            <div class="midle-of">
                <h4>Cart Summary</h4>
                <h6><input type="radio" name="ravi"> Free Shopping <span class="rate1"> 0.0</span> <br></h6>
                <h6><input type="radio" name="ravi"> Express Shopping <span class="rate2">15.0</span><br></h6>
                <h6><input type="radio" name="ravi"> Pickup <span class="rate3">%21</span> <br></h6>
                <h5 id = 'sub-total'>Subtotal <span>-</span></h5>
                <hr>
                <h3 id = 'total'>Total <span>-</span></h3>
                <button class="checkout">Checkout</button>

                <div class="coupon">
                    <h4>Have a Coupon?</h4>
                    <p class="coupon-para">Add your code for an instant cart discount</p>

                    <p class="coupon-code"> <i class="fa-solid fa-ticket"></i> <input type="text"
                            placeholder="Coupon Code">
                        <button class="coupon-btn">Apply</button>
                    </p>
                </div>
            </div>

        </div>
        <footer>
            <h4 class="foot-one">Shop<span>cart</span> </h4>
            <div class="foot-two">
                <ul>
                    <li>About us</li>
                    <li>Contact</li>
                    <li>Help</li>
                </ul>
            </div>
            <div class="footer-content">
                <select id="country-select" class="country-select">

                    <option value="us">English</option>
                    <option value="uk">French</option>
                    <option value="in">Russian</option>
                    <option value="ca">Spanish</option>
                </select>
            </div>
        </footer>

        <script>
            function quantityChange() {
                document.getElementById("quantity").addEventListener("change", function () {
                    window.localStorage.setItem('quantity', parseFloat(this.value));
                    const quantity = window.localStorage.getItem('quantity');
                            var total_cost = quantity * window.localStorage.getItem('productPrice').slice(1);
                            const tprice = document.getElementById('tprice').innerHTML = `₹${total_cost}.00`;
                            document.getElementById('sub-total').innerHTML = `Subtotal <span>₹${total_cost}.00</span>`;
                            document.getElementById('total').innerHTML = `Total <span>₹${total_cost}.00</span>`;
                            document.getElementById('addquantity').value = quantity;
                });
            }
            function checkUserProfile() {
                const username = localStorage.getItem('username');
                if (username) {
                    document.getElementById('logout-button').style.display = 'flex';
                    document.getElementById('user-profile').innerHTML = username;
                    document.getElementById('user-profile-btn').style.display = 'none';
                    document.getElementById('logout-button').innerHTML = 'Logout';
                } else {
                    document.getElementById('user-profile-btn').style.display = 'flex';
                    document.getElementById('user-profile').innerHTML = 'to Shop';
                    document.getElementById('logout-button').style.display = 'none';
                }
                imageRender();
            }
            function goToHomePage() {
                window.location.href = 'home';
            }
            function imageRender() {
                const id = window.localStorage.getItem('productId');
                var imgs =  document.getElementById('firstleft');
                var top = document.getElementById('tsimg'); 
                top.src = "../assets/"+id+".jpg";
                imgs.innerHTML+=` <img src="../assets/${id}.jpg" alt="" width="80px" height="90px" class="first-img">
            <img src="../assets/thumbs/${id}_1.jpg" alt="" width="80px" height="90px">
            <img src="../assets/thumbs/${id}_2.jpg" alt="" width="80px" height="90px">
            <img src="../assets/thumbs/${id}_3.jpg" alt="" width="80px" height="90px">`;
            const products = document.getElementById('ratings');
            products.innerHTML = `<p >${window.localStorage.getItem('productName')}<br>${window.localStorage.getItem('productDescription')}<br></p>
                            <p>Rating:
                                <span>⭐⭐⭐⭐☆</span> (4.0).
                            </p>
                            <img id="expanded-img" src="../assets/${window.localStorage.getItem('productId')}.jpg" alt="Expanded Product" />`;
                            const price = document.getElementById('price');
                            price.textContent = `${window.localStorage.getItem('productPrice')}`;
                        }
            window.onload = checkUserProfile;


            const myimg = document.getElementById('expanded-img');

            myimg.addEventListener('mousemove', onZoom);
            myimg.addEventListener('mouseleave', offZoom);

            function onZoom(e) {
                const rect = e.target.getBoundingClientRect();
                const x = e.clientX - rect.left; // X-coordinate within the image
                const y = e.clientY - rect.top;  // Y-coordinate within the image

                // Calculate the percentage position of the cursor within the image
                const xPercent = (x / rect.width) * 100;
                const yPercent = (y / rect.height) * 100;

                // Apply transform origin based on cursor position and scale up
                myimg.style.transformOrigin = `${xPercent}% ${yPercent}%`;
                myimg.style.transform = 'scale(2)'; // Adjust the scale factor as needed
                myimg.style.cursor = 'zoom-out'; // Change cursor to indicate zoom-out
            }

            function offZoom() {
                // Reset transform and cursor when not hovering
                myimg.style.transform = 'scale(1)';
                myimg.style.cursor = 'zoom-in';
            }


        </script>


</body>

</html>